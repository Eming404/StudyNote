# 一、Vim常用操作

## 1.1 Vim简介

​		全屏幕文本编辑器，用于建立、编辑、显示文本文件。Vim没有菜单，只有命令。

## 1.2 工作模式

- ``vi filename`` 进入命令模式，``wq`` 保存退出，``q!`` 不保存退出
- 在命令模式中输入``a i o`` 进入插入模式，ESC键退回命令模式
- 在命令模式中输入``:`` 进入编辑模式，按回车执行命令回到命令模式

## 1.3 插入命令

| 命令 |          用途          |
| :--: | :--------------------: |
|  a   |  在光标所在字符后插入  |
|  A   |   在光标所在行尾插入   |
|  i   | 在光标所在字符前面插入 |
|  I   |  在光标所在行行首插入  |
|  o   |    在光标下插入新行    |
|  O   |    在光标上插入新行    |

## 1.4 定位命令

|    命令    |    用途    |
| :--------: | :--------: |
|  ：set nu  |  设置行号  |
| ：set nonu |  取消行号  |
|     gg     |  到第一行  |
|     G      | 到最后一行 |
|     nG     |  到第n行   |
|    ：n     |  到第n行   |
|     $      |  移至行尾  |
|     0      |  移至行首  |

## 1.5 删除命令

|   命令    |            作用            |
| :-------: | :------------------------: |
|     x     |     删除光标所在处字符     |
|    nx     |  删除光标所在处后n个字符   |
|    dd     | 删除光标所在行，ndd删除n行 |
|    dG     |  删除光标所在处到行尾内容  |
|     D     |  删除光标所在处到行尾内容  |
| ：n1，n2d |      删除指定范围的行      |

## 1.6 复制和剪切

| 命令 |             作用             |
| :--: | :--------------------------: |
|  yy  |          复制当前行          |
| nyy  |      复制当前行以下n行       |
|  dd  |          剪切当前行          |
| ndd  |       剪切当前以下n行        |
| p、P | 粘贴在当前光标所在行下或行上 |

## 1.7 替换和取消

| 命令 |                作用                 |
| :--: | :---------------------------------: |
|  r   |         取代光标所在处字符          |
|  R   | 从光标所在处开始替换字符，ESC键结束 |
|  u   |           取消上一步操作            |

## 1.8 搜索和替换命令

|       命令        |                             作用                             |
| :---------------: | :----------------------------------------------------------: |
|      /string      | 搜索指定字符串。搜索时忽略大小写``:set ic`` ，取消忽略大小写``:set noic`` |
|         n         |               搜索时指定字符串的下一个出现位置               |
|   :%s/old/new/g   |     全文替换指定字符串，g表示替换时不询问，使用c表示询问     |
| :n1,n2s/old/new/g |                  在一定范围内替换指定字符串                  |

## 1.9 保存和退出

| 命令            | 作用                                     |
| --------------- | ---------------------------------------- |
| :w              | 保存修改                                 |
| :w new_filename | 另存为指定文件                           |
| :wq             | 保存退出                                 |
| ZZ              | 快捷键，保存修改并退出                   |
| :q！            | 不保存退出                               |
| :wq!            | 保存修改并退出（文件所有者和root可使用） |

# 二、Vim使用技巧

## 2.1 导入命令

- ``:r filename`` 当前光标处导入文件内容
- ``:![系统命令]`` 在不退出vim的情况下执行系统命令
- ``:r ![系统命令]`` 在当前光标处导入命令执行结果

## 2.2 定义快捷键

- ``:map 快捷键 触发命令``
- 范例：
  - ``:map ^T I#<ESC>`` 将ctrl+P键定义为：首先跳到行首进入插入模式，输入#，退回命令模式。其中^使用ctrl+V输入，而不是shift+6
  - ``:map ^B 0x`` 定义ctrl+B为：首先调到行首，然后删除行首字符

## 2.3 连续注释行

- ``:n1,n2s/^/#/g`` 注连续注释n1至n2行，其中^表示行首，#表示需注释符号为#
- ``:n1,n2s/^#//g`` 将n1至n2行行首的#替换为空，即取消注释。
- 替换符号/时，需使用转义字符\

## 2.4 替换

- ``ab mymail 221@qqcom`` 将文本中的mymail替换为221@qqcom，使用时只需输入mymail加空格，回车即可替换

## 2.5 保存自定义命令

​		需要将自定义命令写入每个用户家目录下的配置文件中。

- 打开家目录（/root或者/home/user_name）
- 打开.vimrc文件
- 输入编辑模式的命令，前面不用加冒号