# 一、软件包管理简介

- 源码包：在此基础上有脚本安装包
- 二进制包：RPM包、系统默认包

## 1.1 源码包

​	优点：

- 开源，如果有足够的能力，可以修改源代码

- 可以自由选择所需的功能

- 软件可以是编译安装，所以更加适合自己的系统，更加稳定也效率更高

- 卸载方便

  缺点：

- 安装过程步骤较多，尤其安装较大的软件集合时，容易出现拼写错误

- 编译过程时间较长，安装比二进制安装时间长

## 1.2 RPM包

​	优点：

- 包管理系统简单，只通过几个命令就可以实现包的安装、升级、查询和卸载
- 安装速度比源码包安装快得多

​    缺点：

- 经过编译，不能看到源代码
- 功能选择不如源码包灵活
- 依赖性

# 二、RPM包管理-rpm命令

## 2.1 RPM包命名原则

- httpd-2.2.15-15.e16.centos.1.i686.rpm
  - 包全名：操作的包是没有安装的软件包时，使用包全名，而且要注意路径
  - 包名：操作已安装的软件包时，使用包名，比如查询、卸载。是搜索/var/lib/rpm中的数据库
- httpd：软件包名
- 2.2.15：软件版本
- 15：软件发布的次数
- e16.centos：适合的Linux平台
- i686：适合的硬件平台。noarch指任何硬件平台都可以用
- rpm：包扩展名

## 2.2 RPM包依赖性

- 树形依赖：a->b->c，安装顺序为cba，卸载顺序为abc
- 环形依赖：a->b->c->a，使用命令同时安装abc
- 模块依赖：[查询网站][www.rpmfind.net]

## 2.3 RPM安装、升级

- ``rpm -ivh [包全名] ``
  - -i：install，安装
  - -v：verbose，显示详细信息
  - -h：hash，显示进度
  - --nodeps：不检测依赖性
- ``rpm -Uvh [包全名]``
  - -U：update，升级

## 2.5 RPM包卸载

- ``rpm -e [包名]``
  - -e：erase，卸载。不需要在特定目录下进行，因为该命令从数据库中寻找软件。

## 2.6 RPM查询

- ``rpm -q [包名]``
  - -q：query，查询。
- ``rpm -qa``
  - 查询所有安装包。
  - ``rpm -qa | grep python`` ：按关键词python查找已安装软件包。“|”为管道符，把左边命令的正确输出作为右边命令的操作对象。
- ``rpm -qi [包名]`` 
  - -i：information，查询软件信息。
  - -p：package，在当前目录下查询未安装包信息，需使用包全名。
- ``rpm -qf [系统文件名]``
  - -f：查询系统文件属于那个软件包。

- ``rpm -qR [包名]``
  - -R：查询软件包的依赖性(requires)
  - -p：查询未安装包信息

## 2.7 校验和文件提取

- ``rpm -V [已安装的包名]``
  - -V：校验指定RPM包中的文件(verify)
  - 运行结果：``S.5....T. c /etc/httpd/conf/httpd.conf``
  - 运行结果中的含义为：
    - 验证内容中的8个信息具体内容：
      - S：文件大小是否改变
      - M：文件的类型或文件的权限是否被改变
      - 5：文件MD5校验和 是否改变，可看成文件内容是否改变
      - D：设备的中、从代码是否改变
      - L：文件路径是否改变
      - U：文件的属组（所有者）是否改变
      - G：文件的属组是否改变
      - T：文件的修改实践是否改变
    - c表示文件类型
      - c：配置文件，config file
      - d：普通文档，documentation
      - g：ghost file，很少见，表示该文件不应该被这个RPM包含
      - l：授权文件，license file
      - r：描述文件，read me
  
- ``rpm2cpio [包全名] | cpio -idv .文件绝对路径 `` 
  - 用于从包中提取指定路径下的文件到当前路径下，”.“表示当前路径
  - rpm2cpio用于将rpm包转化为cpio格式
  - cpio是一个标准工具，它用于创建软件档案文件和从档案文件中提取文件
  - ``cpio 选项 < [文件 | 设备]``
    - -i：copy-in模式，还原
    - -d：还原时自动新建目录
    - -v：显示还原过程
  

# 三、RPM包管理-yum在线管理

## 3.1 IP地址配置和网络yum源



